{% extends "base.html" %}

{% block content %}
<section class="section-title py-4 bg-light border-bottom">
    <div class="container">
        <h1 class="h3 mb-1">FotoÄŸraf Galerisi</h1>
        <p class="text-muted mb-3">Motelimizden ve AvÅŸa AdasÄ±'ndan en gÃ¼zel anlar.</p>
    </div>
</section>

<section class="dashboard-content py-5">
    <div class="container">
        
        {% if gallery_items %}
        
        <div id="mainGalleryCarousel" class="carousel slide mb-4 shadow-lg border rounded-3 overflow-hidden" data-bs-ride="carousel">
            
            <div class="carousel-indicators">
                {% for item in gallery_items %}
                <button type="button" data-bs-target="#mainGalleryCarousel" data-bs-slide-to="{{ loop.index0 }}" 
                        class="{% if loop.first %}active{% endif %}" aria-current="{% if loop.first %}true{% else %}false{% endif %}" aria-label="Slide {{ loop.index }}"></button>
                {% endfor %}
            </div>
            
            <div class="carousel-inner">
                {% for item in gallery_items %}
                <div class="carousel-item {% if loop.first %}active{% endif %}">
                    <img src="{{ item.path }}" class="d-block w-100 carousel-enlarged-image" alt="{{ item.title }}">
                    
                </div>
                {% endfor %}
            </div>
            
            <button class="carousel-control-prev" type="button" data-bs-target="#mainGalleryCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Ã–nceki</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#mainGalleryCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Sonraki</span>
            </button>
        </div>

        <h4 class="mb-3">TÃ¼m GÃ¶rseller</h4>
        <div class="d-flex flex-wrap justify-content-center" id="thumbnail-strip">
            {% for item in gallery_items %}
            {% set loop_index = loop.index0 %}
            <div class="thumbnail-item m-2">
                <img src="{{ item.path }}" 
                     alt="{{ item.title }}"
                     data-bs-target="#mainGalleryCarousel" 
                     data-bs-slide-to="{{ loop_index }}"
                     class="img-thumbnail rounded shadow-sm" 
                     style="width: 120px; height: 80px; object-fit: cover; cursor: pointer;">
            </div>
            {% endfor %}
        </div>

        {% else %}
        <div class="alert alert-info text-center" role="alert">
            Galeri iÃ§in henÃ¼z gÃ¶rsel yÃ¼klenmemiÅŸ.
        </div>
        {% endif %}
        
    </div>
</section>

<style>
/* BÃ¼yÃ¼tÃ¼lmÃ¼ÅŸ resimlerin yÃ¼kseklik/geniÅŸlik sabitlenmesi (Carousel iÃ§inde) */
.carousel-enlarged-image {
    height: 60vh; /* GÃ¶rselin yÃ¼ksekliÄŸini ekranÄ±n %60'Ä± olarak ayarlar */
    
    /* ğŸš¨ DEÄÄ°ÅÄ°KLÄ°K BURADA: 'cover' yerine 'contain' kullanÄ±yoruz */
    object-fit: contain; 
    
    width: 100%; /* GeniÅŸliÄŸin tamamÄ±nÄ± kaplamasÄ±nÄ± saÄŸla */
    
    /* Gerekirse, kenarlarda boÅŸluk bÄ±rakarak ortalamak iÃ§in: */
    background-color: #f8f9fa; /* Arka plan rengi verilebilir */
}

/* Thumbnail'lerin daha dÃ¼zgÃ¼n gÃ¶rÃ¼nmesi iÃ§in */
/* ... (DiÄŸer stil kurallarÄ± burada kalabilir) ... */
</style>
{% block scripts %}
{{ super() }} 

<script>
document.addEventListener('DOMContentLoaded', function () {
    
    // 1. Bootstrap Carousel nesnesini alÄ±yoruz (ID: mainGalleryCarousel)
    const mainCarouselElement = document.getElementById('mainGalleryCarousel');
    const mainCarousel = new bootstrap.Carousel(mainCarouselElement);
    
    // --- A. THUMBNAIL TIKLAMALARINI Ã‡ALIÅTIRMA (ZATEN Ã‡ALIÅIYOR OLMALI) ---
    const thumbnails = document.querySelectorAll('#thumbnail-strip .thumbnail-item img');

    thumbnails.forEach((thumbnail, index) => {
        thumbnail.addEventListener('click', function() {
            // KÃ¼Ã§Ã¼k resme tÄ±klandÄ±ÄŸÄ±nda Carousel'i ilgili indekse kaydÄ±r
            mainCarousel.to(index);
        });
    });
    
    // --- B. Ã–NCEKÄ°/SONRAKÄ° BUTONLARI Ã‡ALIÅTIRMA (GEREKLÄ° EKLEME) ---
    // Bootstrap, data-bs-slide="prev/next" ile tanÄ±mlanan butonlarÄ± otomatik algÄ±lar,
    // ancak bazen JS ile tetiklemek gerekebilir veya CSS ile kapalÄ± kalabilir.

    // Genellikle bu butonlar Bootstrap JS yÃ¼klÃ¼yse otomatik Ã§alÄ±ÅŸÄ±r.
    // EÄŸer Ã§alÄ±ÅŸmÄ±yorsa, manuel olarak tetikleyebiliriz:
    
    const prevButton = document.querySelector('.carousel-control-prev');
    const nextButton = document.querySelector('.carousel-control-next');

    if (prevButton) {
        prevButton.addEventListener('click', function(e) {
            e.preventDefault(); // VarsayÄ±lan tarayÄ±cÄ± davranÄ±ÅŸÄ±nÄ± durdur
            mainCarousel.prev(); // Bir Ã¶nceki slayta git
        });
    }
    
    if (nextButton) {
        nextButton.addEventListener('click', function(e) {
            e.preventDefault(); // VarsayÄ±lan tarayÄ±cÄ± davranÄ±ÅŸÄ±nÄ± durdur
            mainCarousel.next(); // Sonraki slayta git
        });
    }
});
</script>

{% endblock %}
{% endblock %}